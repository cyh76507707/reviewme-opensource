# 테스트 전략: 점진적 전환 및 테스트

## 🎯 추천 접근법: 단계별 전환 + 테스트

각 페이지를 전환한 후 즉시 테스트하여 문제를 조기에 발견하고 안전하게 롤백할 수 있습니다.

---

## 📋 단계별 전환 및 테스트 계획

### Step 1: txHash 조회 전환 (가장 안전, 높은 우선순위)

**파일**: `components/TxHashLink.tsx`

**이유**:
- ✅ 독립적인 컴포넌트 (다른 페이지에 영향 없음)
- ✅ 무거운 작업 (getLogs) 클라이언트로 이동 → 서버 부하 감소
- ✅ 영구 캐싱으로 재호출 최소화

**전환 후 테스트**:
- [ ] 리뷰 상세 페이지에서 txHash 로딩 확인
- [ ] 캐시 동작 확인 (두 번째 방문 시 즉시 표시)
- [ ] 네트워크 탭에서 RPC 호출 확인
- [ ] 여러 리뷰 ID 테스트

**예상 시간**: 10분 전환 + 5분 테스트 = **15분**

---

### Step 2: 홈페이지 전환 (낮은 우선순위, 하지만 간단)

**파일**: `app/page.tsx`

**이유**:
- ✅ 비교적 간단한 전환
- ✅ 많은 유저가 사용하는 페이지 (효과 큼)
- ✅ 문제 발생 시 즉시 확인 가능

**전환 후 테스트**:
- [ ] 홈페이지 로딩 확인
- [ ] 최근 리뷰 목록 표시 확인
- [ ] 캐시 동작 확인 (새로고침 시 빠른 로딩)
- [ ] 네트워크 탭에서 RPC 호출 확인
- [ ] 에러 핸들링 확인 (RPC 실패 시)

**예상 시간**: 15분 전환 + 10분 테스트 = **25분**

---

### Step 3: 유저 프로필 페이지 전환 (중간 우선순위)

**파일**: `app/user/[address]/page.tsx`

**이유**:
- ✅ 독립적인 페이지
- ✅ 여러 지갑 주소 테스트 가능

**전환 후 테스트**:
- [ ] 프로필 페이지 로딩 확인
- [ ] 리뷰 목록 표시 확인
- [ ] 여러 지갑 주소 테스트
- [ ] 캐시 동작 확인
- [ ] 네트워크 탭에서 RPC 호출 확인

**예상 시간**: 20분 전환 + 10분 테스트 = **30분**

---

### Step 4: 리뷰 상세 페이지 전환 (가장 복잡, SEO 중요)

**파일**: `app/review/[reviewId]/page.tsx`

**이유**:
- ⚠️ SEO 중요 (서버 렌더링 유지 필요)
- ⚠️ 하이브리드 접근 필요 (서버 + 클라이언트)
- ⚠️ 가장 복잡한 전환

**전환 후 테스트**:
- [ ] 서버 렌더링 확인 (소스 보기)
- [ ] 클라이언트 업데이트 확인
- [ ] 여러 리뷰 ID 테스트
- [ ] 캐시 동작 확인
- [ ] SEO 메타데이터 확인
- [ ] 네트워크 탭에서 RPC 호출 확인

**예상 시간**: 30분 전환 + 15분 테스트 = **45분**

---

## ⏱️ 총 예상 시간

- **점진적 접근**: 15 + 25 + 30 + 45 = **115분 (약 2시간)**
- **한꺼번에 접근**: 80분 전환 + 30분 테스트 = **110분 (약 2시간)**

**시간 차이는 거의 없지만, 점진적 접근이 훨씬 안전합니다!**

---

## 🔄 각 단계별 롤백 계획

### 즉시 롤백 (환경변수)

```bash
# .env.local
NEXT_PUBLIC_USE_CLIENT_RPC=false
```

모든 클라이언트 RPC 호출이 자동으로 API route로 fallback

### 부분 롤백 (코드 수정)

각 페이지에서 개별적으로 API route로 되돌릴 수 있음

---

## ✅ 테스트 체크리스트

### 기본 기능 테스트
- [ ] 페이지 로딩 (로딩 상태 표시)
- [ ] 데이터 표시 (리뷰 내용, 프로필 등)
- [ ] 에러 핸들링 (RPC 실패 시)
- [ ] 네트워크 오프라인 시

### 캐싱 테스트
- [ ] 첫 방문: RPC 호출 확인
- [ ] 두 번째 방문: 캐시에서 로딩 확인 (빠른 로딩)
- [ ] 캐시 만료 후: 다시 RPC 호출 확인

### 성능 테스트
- [ ] 네트워크 탭에서 RPC 호출 수 확인
- [ ] 로딩 시간 측정
- [ ] 메모리 사용량 확인 (IndexedDB)

### 브라우저 호환성
- [ ] Chrome
- [ ] Firefox
- [ ] Safari
- [ ] 모바일 브라우저

---

## 🚀 시작하기

**추천 순서**:
1. Step 1 (txHash) → 테스트 → 문제 없으면
2. Step 2 (홈페이지) → 테스트 → 문제 없으면
3. Step 3 (프로필) → 테스트 → 문제 없으면
4. Step 4 (상세 페이지) → 테스트 → 완료!

각 단계마다 **커밋**하여 롤백을 쉽게 하세요!

